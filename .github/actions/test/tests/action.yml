name: Run Tests
description: Run tests via Playwright
runs:
  using: composite
  steps:
    - name: Run Tests
      shell: bash
      env:
        COMFYUI_CPU_ONLY: true
      run: |
        yarn run test:e2e
    - name: Display Results
      shell: python
      run: |
        print(open('test-results/.last-run.json').read())
    - name: Upload Test Results
      uses: actions/upload-artifact@v4
      continue-on-error: true
      if: always()
      with:
        name: testresults
        path: ./test-results
    - name: Upload Elctron Logs
      uses: actions/upload-artifact@v4
      continue-on-error: true
      if: always()
      with:
        name: electronlogs
        path: C:/Users/runneradmin/AppData/Roaming/Electron/logs
