name: Run Tests
description: Run tests via Playwright
runs:
  using: composite
  steps:
    - name: Run Tests
      shell: bash
      env: 
        COMFYUI_CPU_ONLY: true
      run: |
        yarn run test:e2e
    - name: Display Results
      shell: python
      run: |
        print(open('test-results/.last-run.json').read())
    - name: print folder
      continue-on-error: true
      if: always()
      shell: powershell
      run: |
        cd C:\\Users\\runneradmin\\
        ls
        cd comfyui-electron
        ls
    - name: print main
      continue-on-error: true
      shell: powershell
      if: always()
      run: |
        cd $ENV:APPDATA
        cd ComfyUI/logs
        gc main.log
    - name: print comf
      continue-on-error: true
      shell: powershell
      if: always()
      run: |
        cd $ENV:APPDATA
        cd ComfyUI/logs
        ls
    - name: Upload Compare
      uses: actions/upload-artifact@v4
      continue-on-error: true
      if: always()
      with:
        name: testresults
        path: ./test-results
    - name: Upload elctron
      uses: actions/upload-artifact@v4
      continue-on-error: true
      if: always()
      with:
        name: electronlogs
        path: C:/Users/runneradmin/AppData/Roaming/Electron/logs