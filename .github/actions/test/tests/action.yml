name: Run Tests
description: Run tests via Playwright
runs:
  using: composite
  steps:
    - name: Run Tests
      shell: bash
      run: |
        yarn run test:e2e
    - name: Display Results
      shell: python
      run: |
        print(open('test-results/.last-run.json').read())
        close('test-results/.last-run.json')
    - name: printlog
      continue-on-error: true
      working-directory: 'C:\'
      shell: powershell
      if: always()
      run: |
        cd $ENV:APPDATA
        cd ComfyUI/logs
        gc main.log
    - name: Upload Compare
      uses: actions/upload-artifact@v4
      continue-on-error: true
      working-directory: 'C:\'
      if: always()
      with:
        name: startup-diffs
        path: %APPDATA%/ComfyUI/logs/*.log